<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>VIP Cyber Database</title>
    <meta name="description" content="Sim Data, Sim Database, Sim details ownership, VIP Sim Database.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Source+Code+Pro:wght@400&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <style>
        /* (Your original CSS preserved) */
        :root{--primary-green:#25D366;--glow-color:rgba(37,211,102,0.7);--bg-color:#2c2f33;--light-shadow-color:#373a3f;--dark-shadow-color:#212326;--text-color:#e0e0e0;--text-color-muted:#888}
        *{margin:0;padding:0;box-sizing:border-box}
        html,body{font-family:'Poppins',sans-serif;background-color:var(--bg-color);color:var(--text-color);text-align:center}
        .container{max-width:700px;margin:0 auto;padding:20px}
        .header{font-size:2.5em;font-weight:700;color:var(--primary-green);text-shadow:0 0 8px var(--glow-color);margin:30px 0}
        .card{background:var(--bg-color);border-radius:20px;box-shadow:8px 8px 16px var(--dark-shadow-color), -8px -8px 16px var(--light-shadow-color);padding:30px;margin-bottom:30px;text-align:left}
        .card h2{text-align:center;margin-bottom:25px;font-weight:600}
        #query{width:100%;padding:18px;border:none;border-radius:12px;font-size:1em;text-align:center;background-color:var(--bg-color);color:var(--text-color);box-shadow:inset 4px 4px 8px var(--dark-shadow-color), inset -4px -4px 8px var(--light-shadow-color)}
        #query:focus{outline:none;box-shadow:0 0 0 2px var(--primary-green), inset 2px 2px 4px var(--dark-shadow-color), inset -2px -2px 4px var(--light-shadow-color)}
        #query::placeholder{color:var(--text-color-muted)}
        .search-btn{width:100%;margin-top:20px;padding:16px;font-size:1.2em;font-weight:600;background:var(--primary-green);color:#000;border:none;border-radius:12px;cursor:pointer;transition:all 0.2s ease;box-shadow:4px 4px 10px var(--dark-shadow-color), -4px -4px 10px var(--light-shadow-color), 0px 0px 15px var(--glow-color)}
        .search-btn:hover{transform:translateY(-2px);box-shadow:6px 6px 12px var(--dark-shadow-color), -6px -6px 12px var(--light-shadow-color), 0px 0 25px var(--glow-color)}
        .warning{color:var(--text-color-muted);margin-top:15px;font-size:0.9em;text-align:center}
        #results{margin-top:20px}
        .result-box{background-color:var(--bg-color);border-radius:12px;padding:20px;margin-bottom:15px;box-shadow:inset 4px 4px 8px var(--dark-shadow-color), inset -4px -4px 8px var(--light-shadow-color);animation:fadeIn 0.5s ease}
        .result-box p{font-size:1rem;margin:10px 0;display:flex;justify-content:space-between}
        .label{font-weight:600;color:var(--text-color-muted);margin-right:15px}
        .result-box .value{font-family:'Source Code Pro',monospace;color:var(--text-color)}
        #noData{margin-top:20px;padding:20px;border-radius:12px;background:var(--bg-color);box-shadow:inset 4px 4px 8px var(--dark-shadow-color), inset -4px -4px 8px var(--light-shadow-color);color:var(--text-color-muted);line-height:1.7;text-align:center}
        #noData a{display:block;margin-top:15px;color:var(--primary-green);font-weight:600;text-decoration:none}
        .service-list{list-style-type:none;padding:0;font-size:1rem}
        .service-list li{padding:12px 0;border-bottom:1px solid var(--dark-shadow-color)}
        .service-list li::before{content:"‚úÖ";margin-right:10px;color:var(--primary-green)}
        .service-list li:last-child{border-bottom:none}
        .card h3{color:var(--text-color);margin-bottom:15px;border-bottom:1px solid var(--dark-shadow-color);padding-bottom:10px}
        .card p{line-height:1.7;color:var(--text-color-muted)}
        .contact-list{list-style:none;padding:0}
        .contact-list li{margin:10px 0}
        .contact-list i{margin-right:10px;color:var(--primary-green);width:20px;text-align:center}
        .contact-list a{color:var(--text-color);text-decoration:none;transition:color 0.2s}
        .contact-list a:hover{color:var(--primary-green)}
        footer{padding:30px 20px;text-align:center;border-top:1px solid var(--dark-shadow-color);margin-top:20px}
        footer p{color:var(--text-color-muted)}
        .hidden{display:none}
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">YOUR WEBSITE NAME</div>

        <div class="card">
            <input type="text" id="query" placeholder="Enter Mobile e.g. 030000XXXXX" />
            <button class="search-btn" id="searchBtn">Search <i class="fa fa-search"></i></button>
            <p class="warning">Enter Number Like This: 030000XXXXX</p>
        </div>

        <div id="results"></div>
        <p class="hidden" id="noData"></p>

        <div class="card services">
            <h2>Paid Services</h2>
            <ul class="service-list">
                <li>Fresh Sim Details</li>
                <li>CNIC Numbers Check</li>
                <li>CNIC Colour Picture</li>
                <li>CDR - Call Detail Records</li>
                <li>Family Tree & FRC Details</li>
                <li>Mobile IMEI Tracking</li>
                <li>SIM Live Location Trace</li>
                <li>Vehicle Details Check</li>
                <li>Passport Copy & Details</li>
                <li>Bank Statement & Details</li>
                <li><strong>More Services Available...</strong></li>
            </ul>
        </div>

        <div class="card">
             <h3>üö® Disclaimer</h3>
             <p>All services and website are for educational, security, and verification purposes only. We do not support or promote illegal access or misuse of data.</p>
        </div>

        <div class="card">
             <h3>Contact Us</h3>
             <ul class="contact-list">
                <li><i class="fa fa-phone"></i><a href="tel:+18732864504">+18732864504</a></li>
             </ul>
        </div>
    </div>

    <footer>
        <p>Copyright ¬© 2025 YOUR NAME . All Rights Reserved.</p>
    </footer>

    <script>
    /************* CONFIGURED API (from your message) *************/
    // Your provided template:
    const API_TEMPLATE = "https://www.3patticenter.com/famofc/api/database.php?num=$";
    const WHATSAPP_LINK = 'https://wa.me/9230000XXXX';
    /***************************************************/

    const resultsContainer = document.getElementById("results");
    const noData = document.getElementById("noData");
    const searchBtn = document.getElementById("searchBtn");
    const queryInput = document.getElementById("query");

    function sanitizeNumber(str) {
        return (str || "").trim().replace(/\s+/g,"");
    }

    // Build final URL from template. If template contains "$" replace it; otherwise set "num" param.
    function buildFinalUrl(template, value) {
        if (!template) return null;
        if (template.indexOf("$") !== -1) {
            return template.replace(/\$/g, encodeURIComponent(value));
        }
        // fallback: append as num param
        try {
            const u = new URL(template);
            u.searchParams.set('num', value);
            return u.toString();
        } catch (e) {
            // if it's not a full URL, just do simple replacement
            return template + (template.includes('?') ? '&' : '?') + 'num=' + encodeURIComponent(value);
        }
    }

    async function searchData() {
        const raw = sanitizeNumber(queryInput.value);
        if (!raw) {
            noData.classList.remove('hidden');
            noData.textContent = '‚ö†Ô∏è Please enter a valid number';
            resultsContainer.innerHTML = '';
            return;
        }

        noData.classList.remove('hidden');
        noData.textContent = 'Searching...';
        resultsContainer.innerHTML = '';

        const finalUrl = buildFinalUrl(API_TEMPLATE, raw);
        if (!finalUrl) {
            noData.textContent = '‚ö†Ô∏è API template not configured correctly.';
            return;
        }

        try {
            const resp = await fetch(finalUrl, { method: 'GET' });
            if (!resp.ok) {
                // possible CORS or server error
                throw new Error('Network response not ok: ' + resp.status + ' (' + resp.statusText + ')');
            }
            const data = await resp.json();

            // Defensive traversal to extract records (works for arrays/objects/nested)
            let output = '';
            const numbers = new Set();

            function traverse(obj) {
                if (!obj) return;
                if (Array.isArray(obj)) {
                    obj.forEach(i => traverse(i));
                } else if (typeof obj === 'object') {
                    const possibleMobile = obj.Mobile || obj.SUB_NO || obj.mobile || obj.msisdn || obj.phone || obj.number || obj.SUBNO || obj.num || '';
                    if (possibleMobile && !numbers.has(possibleMobile)) {
                        numbers.add(possibleMobile);
                        const name = obj.Name || obj.NAME || obj.name || obj.owner || 'N/A';
                        const cnic = obj.CNIC || obj.NIC || obj.nic || 'N/A';
                        const address = obj.Address || obj.ADDRESS || obj.address || obj.addr || 'N/A';
                        output += `
                            <div class="result-box">
                                <p><span class="label">Mobile:</span> <span class="value">${possibleMobile}</span></p>
                                <p><span class="label">Name:</span> <span class="value">${name}</span></p>
                                <p><span class="label">ID Card:</span> <span class="value">${cnic}</span></p>
                                <p><span class="label">Address:</span> <span class="value">${address}</span></p>
                            </div>
                        `;
                    }
                    // scan nested props
                    Object.values(obj).forEach(v => {
                        if (typeof v === 'object') traverse(v);
                    });
                }
            }

            traverse(data);

            if (output) {
                resultsContainer.innerHTML = output;
                noData.classList.add('hidden');
            } else {
                noData.innerHTML = `
                    ÿßÿ≥ ŸÜŸÖÿ®ÿ± ⁄©ÿß ⁄à€åŸπÿß ÿØÿ≥ÿ™€åÿßÿ® ŸÜ€Å€å⁄∫ €åÿß API ŸÜ€í ÿÆÿßŸÑ€å ÿ¨Ÿàÿßÿ® ÿ®⁄æ€åÿ¨ÿß €Å€í€î
                    <br> ÿß⁄Øÿ± API CORS ÿ®ŸÑÿß⁄© ⁄©ÿ± ÿ±€Å€å €ÅŸà ÿ™Ÿà server-side proxy istemal karein.
                    <br><a href="${WHATSAPP_LINK}" target="_blank">ŸàÿßŸπÿ≥ ÿß€åŸæ ⁄©€í ŸÑ€å€í €å€Åÿß⁄∫ ⁄©ŸÑ⁄© ⁄©ÿ±€å⁄∫</a>
                `;
            }
        } catch (err) {
            console.error("API error:", err);
            // Helpful debug message for CORS or JSON parse issues
            noData.classList.remove('hidden');
            noData.innerHTML = `
                ‚ö†Ô∏è API request failed: ${err.message}
                <br>Possible causes: incorrect API URL, server returned non-JSON, or CORS blocked the request.
                <br>If CORS is the problem use a server-side proxy. Need help setting that up? Reply "proxy".
            `;
        }
    }

    // Events
    searchBtn.addEventListener('click', searchData);
    queryInput.addEventListener('keydown', function(e){ if (e.key === 'Enter') searchData(); });
    </script>

    <!-- optional widget script left as-is if you use it -->
    <script async src='https://d2mpatx37cqexb.cloudfront.net/delightchat-whatsapp-widget/embeds/embed.min.js'></script>
    <script>
      var wa_btnSetting = {"btnColor":"#25D366","ctaText":"","cornerRadius":40,"marginBottom":20,"marginLeft":20,"marginRight":20,"btnPosition":"right","whatsAppNumber":"+923277712441","welcomeMessage":"How can I help you?","zIndex":999999,"btnColorScheme":"light"};
      window.onload = () => { if(window._waEmbed) _waEmbed(wa_btnSetting); };
    </script>
</body>
</html>
